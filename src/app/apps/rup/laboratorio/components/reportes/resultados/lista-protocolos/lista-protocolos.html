<div class="table-grid reporteResultados table-grid-head">
    <span>
        <plex-bool type="checkbox" [(ngModel)]='marcarTodas' (change)="checkAllChange($event, protocolo, registro)" name="validarTodos"></plex-bool>
    </span>
    <span>Nro.</span>
    <span>Fecha</span>
    <span>Documento</span>
    <span>Apellidos y Nombres</span>
    <span>Origen</span>
    <span>Prioridad</span>
    <span>Estado</span>
</div>

<div class="table-grid reporteResultados" *ngFor="let protocolo of protocolos; let i=index">
    <span>
        <plex-bool [(ngModel)]='idsProtocolosSeleccionados[protocolo._id]' type="checkbox" name="validado" (change)="refreshBotonDescargar()" name="clickValidar"></plex-bool>
    </span>
    <span>
        {{ protocolo.solicitud.registros[0]?.valor.solicitudPrestacion.numeroProtocolo?.numeroCompleto }}
    </span>
    <span>{{ protocolo.solicitud.fecha | fecha }}</span>
    <span>{{protocolo.paciente.documento}}</span>
    <span>{{protocolo.paciente.apellido}} {{protocolo.paciente.nombre}}</span>
    <span>{{protocolo.solicitud.ambitoOrigen}}</span>
    <span>
        <plex-badge *ngIf="protocolo.solicitud.registros[0]?.valor.solicitudPrestacion.prioridad?.nombre === 'Urgencia'"
            type="danger">{{protocolo.solicitud.registros[0].valor.solicitudPrestacion.prioridad.nombre}}</plex-badge>
        <plex-badge *ngIf="protocolo.solicitud.registros[0]?.valor.solicitudPrestacion.prioridad?.nombre === 'Normal'"
            type="success">{{protocolo.solicitud.registros[0].valor.solicitudPrestacion.prioridad.nombre}}</plex-badge>
    </span>
    <span>
        <plex-badge *ngIf="protocolo.estados[protocolo.estados.length -1].tipo === 'ejecucion'" type="warning">{{protocolo.estados[protocolo.estados.length
            -1].tipo}}</plex-badge>
        <plex-badge *ngIf="protocolo.estados[protocolo.estados.length -1].tipo === 'validada'" type="info">{{protocolo.estados[protocolo.estados.length
            -1].tipo}}</plex-badge>
    </span>
</div>
<hr>
<plex-button *ngIf="showBotonDescargar" label="Descargar Reportes" type="success" position='right' (click)="descargarReportesClick()"></plex-button>
