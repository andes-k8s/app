<section class="mt-2">
    <!-- <table *ngIf="paciente.relaciones?.length" class="table table-striped table-hover">
        <thead>
            <tr>
                <th></th>
                <th class="text-center">Documento</th>
                <th>Apellido y nombre</th>
                <th>Relación</th>
                <th class="text-center">Acción</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let _unaRel of paciente.relaciones; let k = index">
                <td class="text-center">
                    <img class="img-thumbnail" [mpiFotoPaciente]="idPacientesRelacionados[k]" />
                </td>
                <td class="text-center">
                    <span *ngIf="_unaRel?.documento" class="d-block">{{_unaRel.documento}}</span>
                    <span *ngIf="!_unaRel?.documento" class="d-block">N/D</span>
                </td>
                <td>{{_unaRel.apellido}} {{_unaRel.nombre}}</td>
                <td>
                    <plex-select [(ngModel)]="_unaRel.relacion" name="relacion-{{k}}" [data]="parentescoModel"
                                 [required]="true" placeholder="Seleccione..." (change)="cambioRelacion(k)">
                    </plex-select>
                </td>
                <td class="text-center">
                    <plex-button label="" type="danger btn-sm" icon="close" (click)="removeRelacion(k)"></plex-button>
                </td>
            </tr>
        </tbody>
    </table>-->
    <plex-title size="sm" titulo="Agregar relaciones"></plex-title>

    <plex-wrapper>
        <paciente-buscar label="Buscar paciente" (searchStart)="onSearchStart()"
                         (searchEnd)="onSearchEnd($event.pacientes)" (searchClear)="onSearchClear()" grow="full">
        </paciente-buscar>
    </plex-wrapper>
    <plex-loader *ngIf="loading" type="ball-pulse"></plex-loader>

    <paciente-listado [pacientes]="posiblesRelaciones" (selected)="seleccionarRelacionEntrante($event)">
    </paciente-listado>

    <div *ngIf="posiblesRelaciones && !posiblesRelaciones.length && !searchClear" class="alert alert-danger">
        <i class="mdi mdi-account-alert"></i> No se encontró ningún paciente..
    </div>

    <!-- lista de un único elemento -->
    <plex-list *ngIf="relacionEntrante.length">
        <plex-item *ngFor="let unaRel of relacionEntrante" class="">
            <img [mpiFotoPaciente]="unaRel" />

            <plex-label titulo="{{ unaRel | nombre }}" subtitulo="{{ unaRel.documento | number}}">
            </plex-label>

            <plex-label titulo="{{ unaRel | edad }}"
                        subtitulo="{{ (unaRel.fechaNacimiento | fecha:'utc') || 'Desconocida' }}">
            </plex-label>

            <plex-grid size="sm" type="full">
                <plex-select class="vinculo" [(ngModel)]="unaRel.relacion" name="nuevaRelacion" [data]="parentescoModel"
                             [required]="true" placeholder="Seleccione vínculo...  ">
                </plex-select>
            </plex-grid>

            <plex-badge type="info">{{ unaRel | sexo }}</plex-badge>

            <plex-badge type="" class=""
                        [ngClass]="{'text-success' : unaRel.estado === 'validado' , 'text-warning' : unaRel.estado === 'temporal'} ">
                {{ unaRel.estado }}
            </plex-badge>

            <plex-button label="" type="success" size="sm" icon="plus" [disabled]="!unaRel.relacion"
                         (click)="addRelacion(unaRel)">
            </plex-button>

            <plex-button type="danger" size="sm" icon="close" (click)="relacionEntrante=[]">
            </plex-button>
        </plex-item>
    </plex-list>

</section>