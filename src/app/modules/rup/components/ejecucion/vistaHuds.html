<form class="plex-layout" #form="ngForm">
    <!-- SecciÃ³n principal -->
    <section class="plex-layout prestacionEjecucion" *ngIf="paciente">
        <div class="row">
            <!-- Panel Principal -->
            <div class="col-8">
                <plex-box>
                    <ng-container *ngIf="!registrosHuds">
                        <div class="contenedor-mensaje">
                            <div class="mensaje">

                            </div>
                        </div>
                    </ng-container>
                    <plex-tabs (close)="onCloseTab($event)" [activeIndex]="activeTab">
                        <plex-tab label="Resumen del Paciente" *ngIf="elementosRUPService.ready | async">
                            <rup-resumenPaciente-estatico [paciente]="paciente" esTab="true">
                            </rup-resumenPaciente-estatico>
                            <rup-resumenPaciente-dinamico-nino *ngIf="paciente?.edad <= 6" [paciente]="paciente"
                                esTab="true"></rup-resumenPaciente-dinamico-nino>
                            <rup-resumenPaciente-dinamico *ngIf="paciente?.edad > 6" [paciente]="paciente" esTab="true">
                            </rup-resumenPaciente-dinamico>
                        </plex-tab>
                        <ng-container *ngIf="registrosHuds">
                            <ng-container *ngFor="let registro of registrosHuds; let i = index">
                                <plex-tab [allowClose]="true" [label]="registro.data.concepto.term"
                                    [class]="registro.data.class" [color]="registro.data.class"
                                    *ngIf="registro.tipo === 'concepto'">

                                    <vista-registro
                                        *ngIf="registro.data.class === 'hallazgo' || registro.data.class === 'trastorno'"
                                        [registro]="registro.data" [paciente]="paciente">
                                    </vista-registro>

                                    <vista-procedimiento
                                        *ngIf="registro.data.class === 'procedimiento' || registro.data.class === 'elementoderegistro' || registro.data.class === 'producto'"
                                        [registro]="registro.data" [paciente]="paciente">
                                    </vista-procedimiento>

                                </plex-tab>
                                <plex-tab [allowClose]="true" [label]="registro.data.solicitud.tipoPrestacion.term"
                                    [class]="registro.data.class" color="solicitud" *ngIf="registro.tipo === 'rup'">
                                    <vista-prestacion [registro]="registro.data">
                                    </vista-prestacion>
                                </plex-tab>

                                <plex-tab *ngIf="registro.tipo === 'cda'" [allowClose]="true"
                                    [label]="registro.data.prestacion.snomed.term" [class]="registro.data.class">
                                    <vista-cda [registro]="registro"></vista-cda>
                                </plex-tab>

                            </ng-container>
                        </ng-container>

                    </plex-tabs>
                </plex-box>
            </div>
            <!-- HUDS -->
            <div class="col-4" *ngIf="paciente">
                <plex-box>
                    <!-- HUDS [hudsBusqueda.component.ts] -->
                    <rup-hudsBusqueda #huds [registrosHuds]="registrosHuds" (evtHuds)="agregarListadoHuds($event)"
                        [paciente]="paciente" [prestacionActual]="" [emitirConceptos]="false"></rup-hudsBusqueda>
                </plex-box>
            </div>

        </div>
    </section>

    <!-- Footer -->
    <footer>

        <div class="row">
            <div class="col">
                <plex-button label="{{btnVolver}}" (click)="volver(rutaVolver)" type="info"></plex-button>
                <!-- <plex-button label="Guardar {{prestacion?.solicitud?.tipoPrestacion?.term}}" (click)="guardarPrestacion()" type="success" -->
                <!-- class="float-right"></plex-button> -->
            </div>
        </div>

    </footer>
</form>