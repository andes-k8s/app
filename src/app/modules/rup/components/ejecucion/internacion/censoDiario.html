<section *ngIf="organizacion">
    <plex-box>
        <div class="row">
            <div class="col-4">
                <plex-datetime (change)="reseteaBusqueda()" type="date" [(ngModel)]="fecha" [required]="true" name="fecha" label="Fecha">
                </plex-datetime>
            </div>
            <div class="col-4">
                <plex-select (change)="reseteaBusqueda()" name="servicio" [required]="true" [data]="organizacion.unidadesOrganizativas" idField="term"
                    labelField="term" [(ngModel)]="organizacionSeleccionada" label="Unidad organizativa">
                </plex-select>
            </div>
            <div class="col-2">
                <br>
                <plex-button label="Generar censo" type="primary" (click)="generarCenso()"></plex-button>
            </div>
        </div>
        <div class="row">&nbsp;</div>
        <div class="row">
            <div class="col">
                <table class="table" *ngIf="listadoCenso">
                    <thead>
                        <tr>
                            <th rowspan="2">Apellido y nombre</th>
                            <th rowspan="2">Sector</th>
                            <th rowspan="2">Cama</th>
                            <th rowspan="2">Ingreso</th>
                            <th rowspan="2">Pase de</th>
                            <th rowspan="2">Egreso</th>
                            <th rowspan="2">Pase a</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let censo of listadoCenso, let indice = index">
                            <td>
                                {{censo.ultimoEstado.paciente | paciente }}
                            </td>
                            <td>
                                <span *ngIf="censo.cama.sector">
                                    {{censo.cama.sector }} /
                                </span>
                                <span *ngIf="censo.cama.habitacion">
                                    {{censo.cama.habitacion}}
                                </span>
                            </td>
                            <td>
                                {{censo.cama.nombre}}
                            </td>
                            <td>
                                <div *ngIf="ingresoEgreso && ingresoEgreso[indice]?.esIngreso; else elseIngreso">
                                    si
                                </div>
                                <ng-template #elseIngreso>
                                    no
                                </ng-template>
                            </td>
                            <td>
                                {{ ingresoEgreso[indice]?.esPaseDe?.unidadOrganizativa.term }}
                            </td>
                            <td>
                                {{ ingresoEgreso[indice]?.egreso }}
                            </td>
                            <td>
                                {{ ingresoEgreso[indice]?.esPaseA }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </plex-box>
</section>