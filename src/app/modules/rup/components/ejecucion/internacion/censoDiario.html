<section *ngIf="organizacion">
    <plex-box>
        <div class="row">
            <div class="col-4">
                <plex-datetime (change)="reseteaBusqueda()" type="date" [(ngModel)]="fecha" [required]="true" name="fecha" label="Fecha">
                </plex-datetime>
            </div>
            <div class="col-4">
                <plex-select (change)="reseteaBusqueda()" name="servicio" [required]="true" [data]="organizacion.servicios" idField="term"
                    labelField="term" [(ngModel)]="organizacionSeleccionada" label="Unidad organizativa">
                </plex-select>
            </div>
            <div class="col-2">
                <br>
                <plex-button label="Generar censo" type="primary" (click)="generarCenso()"></plex-button>
            </div>
        </div>
        <div class="row">&nbsp;</div>
        <div class="row">
            <div class="col">
                <table class="table table-bordered" *ngIf="listadoCenso  && listadoCenso.length">
                    <thead>
                        <tr>
                            <th rowspan="2">Apellido y nombre</th>
                            <th rowspan="2">Sector</th>
                            <th rowspan="2">Cama</th>
                            <th rowspan="2">Ingreso</th>
                            <th rowspan="2">Pase de</th>
                            <th rowspan="2">Egreso</th>
                            <th rowspan="2">Pase a</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let censo of listadoCenso, let indice = index">
                            <td>
                                {{censo.ultimoEstado.paciente | paciente }}
                            </td>
                            <td>
                                <span *ngIf="censo.cama.sector">
                                    {{censo.cama.sector }} /
                                </span>
                                <span *ngIf="censo.cama.habitacion">
                                    {{censo.cama.habitacion}}
                                </span>
                            </td>
                            <td>
                                {{censo.cama.nombre}}
                            </td>
                            <td>
                                <div *ngIf="ingresoEgreso && ingresoEgreso[indice]?.esIngreso; else elseIngreso">
                                    si
                                </div>
                                <ng-template #elseIngreso>
                                    no
                                </ng-template>
                            </td>
                            <td>
                                {{ ingresoEgreso[indice]?.esPaseDe?.unidadOrganizativa.term }}
                            </td>
                            <td>
                                {{ ingresoEgreso[indice]?.egreso }}
                            </td>
                            <td>
                                {{ ingresoEgreso[indice]?.esPaseA?.unidadOrganizativa.term }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>


        <div class="row">&nbsp;</div>
        <div class="row">
            <div class="col">
                <table class="table table-bordered" *ngIf="listadoCenso && listadoCenso.length">
                    <thead>
                        <tr>
                            <th rowspan="2">Existencia a las 0 hs</th>
                            <th rowspan="2">Ingresos</th>
                            <th rowspan="2">Pases de</th>
                            <th colspan="2">Egreso</th>
                            <th rowspan="2">Pases A</th>
                            <th rowspan="2">Existencia a las 24 hs</th>
                            <th rowspan="2">Ingresos y egresos del día</th>
                            <th rowspan="2">Pacientes día</th>
                            <th rowspan="2">Camas disponibles a las 24hs</th>
                        </tr>
                        <tr>
                            <th>Altas</th>
                            <th>Defunciones</th>
                        </tr>
                        <tr>
                            <td>{{ resumenCenso.existencia0 }}</td>
                            <td>{{ resumenCenso.ingresos }}</td>
                            <td>{{ resumenCenso.pasesDe }}</td>
                            <td>{{ resumenCenso.egresosAlta }}</td>
                            <td>{{ resumenCenso.egresosDefuncion }}</td>
                            <td>{{ resumenCenso.pasesA }}</td>
                            <td>{{ resumenCenso.existencia24 }}</td>
                            <td>{{ resumenCenso.ingresoEgresoDia }}</td>
                            <td>{{ resumenCenso.pacientesDia }}</td>
                            <td>{{ resumenCenso.disponibles24 }}</td>
                        </tr>

                    </thead>
                </table>
            </div>

        </div>

    </plex-box>
</section>
