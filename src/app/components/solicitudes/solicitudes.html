<form class="plex-layout" #form="ngForm">
    <section>

        <div class="row">
            <!--Panel de Agendas-->
            <div class="col">
                <plex-box>
                    <header>
                        <div class="clearfix">
                            <div class="page-title float-left">Módulo de Solicitudes</div>
                            <!-- <botones-agenda *ngIf="agendasSeleccionadas?.length > 0 && agendas?.length" class="float-right" [agendasSeleccionadas]="agendasSeleccionadas"
                                (clonarEmit)="clonar()" (agregarNotaAgendaEmit)="agregarNotaAgenda()" (agregarSobreturnoEmit)="agregarSobreturno()"
                                (editarAgendaEmit)="editarAgenda($event)" (actualizarEstadoEmit)="actualizarEstadoEmit($event)"
                                (listarTurnosEmit)="listarTurnos($event)" (listarCarpetasEmit)="listarCarpetas($event)" (revisionAgendaEmit)="revisionAgenda($event)"
                                (reasignarTurnosEmit)="reasignarTurnos($event)" [turnosSuspendidos]="turnosSuspendidos">
                            </botones-agenda> -->
                        </div>
                        <div class="row">
                            <div class="col-4">
                                <plex-datetime type="date" [(ngModel)]="fechaDesde" (change)="refreshSelection($event,'fechaDesde')" name="fechaDesde" label="Desde"
                                    class="fechas">
                                </plex-datetime>
                                <!-- <plex-button type="info" icon="chevron-right"></plex-button> -->
                            </div>
                            <div  class="col-4">
                                <plex-datetime type="date" [(ngModel)]="fechaHasta" (change)="cargarSolicitudes()" name="fechaHasta" label="Hasta"
                                    class="fechas">
                                </plex-datetime>
                            </div>
                        </div>
                    </header>
                    <plex-tabs>
                        <plex-tab label="Solicitudes de Entrada" icon="arrow-down-box">
                            <table class="table table-striped table-sm">
                                <thead>
                                    <th>Fecha</th>
                                    <th>Organización (Solicitante)</th>
                                    <th>Profesional (Solicitante)</th>
                                    <th>Tipo de prestación (Solicitada)</th>
                                    <th>Profesional (Solicitado)</th>
                                    <th>Paciente</th>
                                    <th class="text-right estado">Estado</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let solicitud of solicitudes; let i=index"  class="hover" 
                                        [ngClass]="{'bg-inverse text-white': estaSeleccionada(solicitud) >= 0}">
                                        <td click="seleccionar(solicitud)">{{solicitud.fecha | date: 'dd/MM/yyyy'}}</td>
                                        <td>{{solicitud.organizacionOrigen.nombre}}</td>
                                        <td>{{solicitud.profesionalOrigen | profesional}}</td>
                                        <td>{{solicitud.tipoPrestacion.term}}</td>
                                        <td>{{solicitud.profesionalDestino | profesional}}</td>
                                        <td>{{solicitud.paciente | paciente}}</td>
                                        <td class="text-right estado">{{solicitud.estados[solicitud.estados.length-1].tipo}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </plex-tab>
                        <plex-tab label="Solicitudes de Salida" icon="arrow-up-box">
                        </plex-tab>
                    </plex-tabs>
                </plex-box>
            </div>
        </div>
    </section>
</form>
