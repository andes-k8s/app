<form class="plex-layout" #form="ngForm">
    <section>
        <div class="row">
            <!--Panel de Agendas-->
            <div class="col-12">
                <plex-box>
                    <header>
                        <div class="page-title">Configuración de Reglas</div>
                    </header>
                    <div class="row">
                        <div class="col-6">
                            <label>Organizacion Destino</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <span>{{organizacionDestino.nombre}}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4">
                            <plex-select [(ngModel)]="prestacionDestino" name="tipoPrestacion" (getData)="loadTipoPrestaciones($event)" label="Prestación Destino"
                                placeholder="Tipos de Prestación Destino" [required]="true" (change)="cargarReglas()">
                            </plex-select>
                        </div>
                    </div>
                    <!-- <div class="row">
                        <div class="col-6">
                            <plex-bool [(ngModel)]="auditable" name="auditable" label="Auditable">
                            </plex-bool>
                        </div>
                    </div> -->
                    <div *ngFor="let regla of reglas" class="row">
                        <div class="col-4">
                            <label *ngIf="regla.origen && regla.origen.organizacion">Organización Origen</label>
                            <plex-accordion *ngIf="regla.origen && regla.origen.organizacion">
                                <plex-panel (toggle)="expand($event)" #panel>
                                    <div plex-accordion-title>
                                        {{regla.origen.organizacion.nombre}}
                                    </div>
                                    <table class="table table-striped table-sm">
                                        <thead>
                                            <tr>
                                                <th>Prestación </th>
                                                <th>Auditable</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let prestacion of regla.origen.prestaciones; let indice = index">
                                                <td>
                                                    {{prestacion.term}}
                                                </td>
                                                <td>
                                                    <plex-bool [(ngModel)]="prestacion.auditable" name="prestacion.auditable{{indice}}" label="Auditable">
                                                    </plex-bool>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- <div *ngFor="let prestacion of regla.origen.prestaciones; let indiceChild = index">
                                        {{ prestacion.term}}
                                    </div> -->
                                </plex-panel>
                            </plex-accordion>
                        </div>
                    </div>
                </plex-box>
            </div>
        </div>
    </section>
</form>
