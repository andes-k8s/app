<form class="plex-layout" #form="ngForm">
    <section>
        <div class="row">
            <div class="col-8">
                <plex-box type="primary">
                    <header>
                        <div class="page-title">Mapa de sectores de {{ organizacion?.nombre }}</div>
                    </header>
                    <div class="row" *ngIf="organizacion">
                        <div class="col">
                            <div *ngIf="!hasItems()" class="text-center align-middle">
                                Comienza agregando un espacio f√≠sico
                                <br>
                                <plex-button icon="reply" label="Empezar" type="success" (click)="onStart()"> </plex-button>
                            </div>
                            <div *ngIf="hasItems()">
                                <sectores-item *ngFor="let unidad of organizacion.unidadesOrganizativas" [selected]="selectedItem" [root]="unidad" first="true" 
                                 (onAdd)="addItem($event)"></sectores-item>
                            </div>
                        </div>
                    </div>
                </plex-box>
            </div>
            <div class="col-4">
                <plex-box>
                    <header>
                        <div class="page-title">CREAR SECTOR FISICO</div>
                    </header>
                    <div >
                        <div>
                            <plex-select name="servicio" [data]="tiposSectores" idField="conceptId" labelField="term" [(ngModel)]="tipoSector"
                                label="Tipo de sector" (change)="onSectorChange()" [readonly]="disabledPanel">
                            </plex-select>
                        </div>

                        <div *ngIf="unidadID === tipoSector?.conceptId">
                            <plex-select name="servicio" (getData)="loadUnidades($event)" idField="term" labelField="term" [(ngModel)]="unidadOrg"
                                label="Unidad organizativa" (change)="onUnidadChange()" [disabled]="disabledPanel">
                            </plex-select>
                        </div>

                        <div *ngIf="unidadID !== tipoSector?.conceptId">
                            <plex-text [(ngModel)]="itemName" name="nombre-sector" label="Nombre del sector" placeholder="Nombre del sector" [required]="true" [disabled]="disabledPanel"></plex-text>
                        </div>

                        <div class="mt-15">
                            <plex-button label="Cancelar" type="danger" (click)="onDissmis()" [disabled]="disabledPanel"></plex-button>
                            <plex-button label="Crear" type="success" (click)="onAdd()" [disabled]="disabledPanel"></plex-button>
                        </div>
                    </div>
                </plex-box>
            </div>
        </div>
    </section>
</form>
<footer>
    <div class="text-right">
        <plex-button label="Cancelar" type="danger" (click)="onCancel()"> </plex-button>
        <plex-button label="Guardar" type="success" (click)="onSave()"> </plex-button>
    </div>
</footer>